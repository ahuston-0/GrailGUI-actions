\hypertarget{VideoPlayer_8hh_source}{}\doxysection{Video\+Player.\+hh}
\label{VideoPlayer_8hh_source}\index{src/video/VideoPlayer.hh@{src/video/VideoPlayer.hh}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{00002 }
\DoxyCodeLine{00003 \textcolor{preprocessor}{\#include <glad/glad.h>}}
\DoxyCodeLine{00004 }
\DoxyCodeLine{00005 \textcolor{comment}{// This comment is keeping the peace between glad and glfw}}
\DoxyCodeLine{00006 \textcolor{comment}{// Removing glad causes some errors at compile-\/time}}
\DoxyCodeLine{00007 \textcolor{comment}{// Refer to GLWin.cc for a similar situation}}
\DoxyCodeLine{00008 \textcolor{preprocessor}{\#include <GLFW/glfw3.h>}}
\DoxyCodeLine{00009 \textcolor{preprocessor}{\#include <mpv/client.h>}}
\DoxyCodeLine{00010 \textcolor{preprocessor}{\#include <mpv/render\_gl.h>}}
\DoxyCodeLine{00011 }
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#include "{}opengl/Shape.hh"{}}}
\DoxyCodeLine{00013 \textcolor{preprocessor}{\#include "{}util/Ex.hh"{}}}
\DoxyCodeLine{00014 }
\DoxyCodeLine{\Hypertarget{VideoPlayer_8hh_source_l00015}\mbox{\hyperlink{classVideoPlayer}{00015}} \textcolor{keyword}{class }\mbox{\hyperlink{classVideoPlayer}{VideoPlayer}} : \textcolor{keyword}{public} \mbox{\hyperlink{classShape}{Shape}} \{}
\DoxyCodeLine{00016  \textcolor{keyword}{private}:}
\DoxyCodeLine{00017   \textcolor{comment}{// c++ wont let you pass something like \&4 as a parameter, so we create an}}
\DoxyCodeLine{00018   \textcolor{comment}{// advanced control variable within the class to make sure there's a valid}}
\DoxyCodeLine{00019   \textcolor{comment}{// address to point to}}
\DoxyCodeLine{00020   \textcolor{keywordtype}{int} advancedControl;}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022   \textcolor{comment}{// location to draw the video on screen}}
\DoxyCodeLine{00023   \textcolor{keywordtype}{float} x, y, width, height;}
\DoxyCodeLine{00024   \textcolor{comment}{// how much to crop the drawn video by}}
\DoxyCodeLine{00025   \textcolor{keywordtype}{float} xLeft, xRight, yTop, yBottom;}
\DoxyCodeLine{00026   \textcolor{comment}{// places to put the fbo and texture generated by opengl}}
\DoxyCodeLine{00027   uint32\_t fbo, texture;}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029   \textcolor{comment}{// standard mpv context for playing things}}
\DoxyCodeLine{00030   mpv\_handle *mpv;}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032   \textcolor{comment}{// mpv render context that will draw video frames into fbo}}
\DoxyCodeLine{00033   mpv\_render\_context *mpv\_gl;}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035   \textcolor{comment}{// struct with 3 internal bits}}
\DoxyCodeLine{00036   mpv\_opengl\_fbo fboParams;}
\DoxyCodeLine{00037   \textcolor{comment}{// struct where we only end up setting one value}}
\DoxyCodeLine{00038   mpv\_opengl\_init\_params openglInitParams;}
\DoxyCodeLine{00039 }
\DoxyCodeLine{00040   \textcolor{comment}{// a list of lists, where each iternal list contains an enum in the first slot}}
\DoxyCodeLine{00041   \textcolor{comment}{// and some kind of data in the second slot}}
\DoxyCodeLine{00042   \textcolor{comment}{// this will be passed once to mpv giving it initial parameters when creating}}
\DoxyCodeLine{00043   \textcolor{comment}{// an mpv render context}}
\DoxyCodeLine{00044   mpv\_render\_param initialRenderParams[4];}
\DoxyCodeLine{00045   \textcolor{comment}{// list of lists, where each internal list contains an enum in the first slot,}}
\DoxyCodeLine{00046   \textcolor{comment}{// and data in the second}}
\DoxyCodeLine{00047   \textcolor{comment}{// this gets passed to mpv each time the mpv render context redraws, so it's}}
\DoxyCodeLine{00048   \textcolor{comment}{// values could change and affect the output of what shows up on screen}}
\DoxyCodeLine{00049   mpv\_render\_param redrawParams[2];}
\DoxyCodeLine{00050 }
\DoxyCodeLine{00051   \textcolor{comment}{// most mpv functions that can fail return an integer, where 0 is success, and}}
\DoxyCodeLine{00052   \textcolor{comment}{// anything else is some kind of error}}
\DoxyCodeLine{00053   \textcolor{comment}{// this function checks whether a function returned an error code, and if so}}
\DoxyCodeLine{00054   \textcolor{comment}{// prints to the screen what that error code means (from mpv\_error\_string),}}
\DoxyCodeLine{00055   \textcolor{comment}{// then throws a general exception from grail, halting the program}}
\DoxyCodeLine{00056   \textcolor{keyword}{inline} \textcolor{keywordtype}{void} checkError(\textcolor{keywordtype}{int} status) \{}
\DoxyCodeLine{00057     \textcolor{keywordflow}{if} (status < 0) \{}
\DoxyCodeLine{00058       printf(\textcolor{stringliteral}{"{}mpv API error: \%s\(\backslash\)n"{}}, mpv\_error\_string(status));}
\DoxyCodeLine{00059       \textcolor{keywordflow}{throw} Ex1(Errcode::MPV\_FAILURE);}
\DoxyCodeLine{00060     \}}
\DoxyCodeLine{00061   \}}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063   \textcolor{keywordtype}{bool} isPlaying;}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065  \textcolor{keyword}{public}:}
\DoxyCodeLine{00066   \mbox{\hyperlink{classVideoPlayer}{VideoPlayer}}(\mbox{\hyperlink{classCanvas}{Canvas}} *c, \textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{int} width, \textcolor{keywordtype}{int} height);}
\DoxyCodeLine{00067   \string~\mbox{\hyperlink{classVideoPlayer}{VideoPlayer}}();}
\DoxyCodeLine{00068 }
\DoxyCodeLine{00069   \textcolor{comment}{// get rid of the copy constructors}}
\DoxyCodeLine{00070   \mbox{\hyperlink{classVideoPlayer}{VideoPlayer}}(\textcolor{keyword}{const} \mbox{\hyperlink{classVideoPlayer}{VideoPlayer}} \&orig) = \textcolor{keyword}{delete};}
\DoxyCodeLine{00071   \mbox{\hyperlink{classVideoPlayer}{VideoPlayer}} \&operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classVideoPlayer}{VideoPlayer}} \&orig) = \textcolor{keyword}{delete};}
\DoxyCodeLine{00072 }
\DoxyCodeLine{00073   \textcolor{keywordtype}{void} init();}
\DoxyCodeLine{00074   \textcolor{keywordtype}{void} update();}
\DoxyCodeLine{00075   \textcolor{keywordtype}{void} render();}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077   \textcolor{keywordtype}{void} loadFile(std::string filePath);}
\DoxyCodeLine{00078   \textcolor{keywordtype}{void} loadPlaylist(std::string filePath, \textcolor{keywordtype}{bool} append = \textcolor{keyword}{false});}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080   \textcolor{keywordtype}{void} setVolume(\textcolor{keywordtype}{int} volume);}
\DoxyCodeLine{00081   \textcolor{keywordtype}{void} seekLocation(std::string time, std::string type = \textcolor{stringliteral}{"{}relative"{}});}
\DoxyCodeLine{00082   \textcolor{keywordtype}{void} revertSeek();}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084   \textcolor{keywordtype}{void} playlistNext();}
\DoxyCodeLine{00085   \textcolor{keywordtype}{void} playlistPrev();}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087   \textcolor{keywordtype}{void} cropVideo(\textcolor{keywordtype}{float} xLeft, \textcolor{keywordtype}{float} xRight, \textcolor{keywordtype}{float} yTop, \textcolor{keywordtype}{float} yBottom);}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089   \textcolor{keywordtype}{void} setPaused();}
\DoxyCodeLine{00090   \textcolor{keywordtype}{void} setPlaying();}
\DoxyCodeLine{00091   \textcolor{keywordtype}{void} togglePause();}
\DoxyCodeLine{00092 \};}

\end{DoxyCode}

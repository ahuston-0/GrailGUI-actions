\hypertarget{Document_8hh_source}{}\doxysection{Document.\+hh}
\label{Document_8hh_source}\index{src/opengl/Document.hh@{src/opengl/Document.hh}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{00002 \textcolor{preprocessor}{\#include <cstdio>}}
\DoxyCodeLine{00003 \textcolor{preprocessor}{\#include <cstring>}}
\DoxyCodeLine{00004 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{00005 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{00006 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{00007 }
\DoxyCodeLine{00008 \textcolor{preprocessor}{\#include "{}opengl/GLWin.hh"{}}}
\DoxyCodeLine{00009 \textcolor{preprocessor}{\#include "{}util/HashMap.hh"{}}}
\DoxyCodeLine{00010 }
\DoxyCodeLine{\Hypertarget{Document_8hh_source_l00011}\mbox{\hyperlink{classPageLayout}{00011}} \textcolor{keyword}{class }\mbox{\hyperlink{classPageLayout}{PageLayout}} \{}
\DoxyCodeLine{00012  \textcolor{keyword}{public}:}
\DoxyCodeLine{00013   \textcolor{keywordtype}{float} x0, x1;     \textcolor{comment}{// left and right margins}}
\DoxyCodeLine{00014   \textcolor{keywordtype}{float} xDropDead;  \textcolor{comment}{// never go beyond this edge, even if no space is found}}
\DoxyCodeLine{00015   \textcolor{keywordtype}{float} y0, y1;     \textcolor{comment}{// top and botton margins}}
\DoxyCodeLine{00016   \textcolor{keywordtype}{float} w, h;       \textcolor{comment}{// width and height of the active part}}
\DoxyCodeLine{00017   \textcolor{keywordtype}{float} pageNumX, pageNumY;}
\DoxyCodeLine{00018   \textcolor{keywordtype}{float} paragraphSpacing;}
\DoxyCodeLine{00019   uint32\_t linesPerPage;}
\DoxyCodeLine{00020   \textcolor{keyword}{const} \mbox{\hyperlink{classFont}{Font}} *f;  \textcolor{comment}{// normal font for this page. TODO: lots more detail later}}
\DoxyCodeLine{00021   \textcolor{comment}{// TODO: list of content at standard locations?}}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023   \mbox{\hyperlink{classPageLayout}{PageLayout}}(\textcolor{keywordtype}{float} x0, \textcolor{keywordtype}{float} y0, \textcolor{keywordtype}{float} w, \textcolor{keywordtype}{float} h, \textcolor{keywordtype}{float} pageNumX,}
\DoxyCodeLine{00024              \textcolor{keywordtype}{float} pageNumY, \textcolor{keywordtype}{float} paragraphSpacing, uint32\_t linesPerPage,}
\DoxyCodeLine{00025              \textcolor{keyword}{const} \mbox{\hyperlink{classFont}{Font}} *f, \textcolor{keywordtype}{float} dropDead = 0)}
\DoxyCodeLine{00026       : x0(x0),}
\DoxyCodeLine{00027         y0(y0),}
\DoxyCodeLine{00028         x1(x0 + w),}
\DoxyCodeLine{00029         y1(y0 + h),}
\DoxyCodeLine{00030         w(w),}
\DoxyCodeLine{00031         h(h),}
\DoxyCodeLine{00032         pageNumX(pageNumX),}
\DoxyCodeLine{00033         pageNumY(pageNumY),}
\DoxyCodeLine{00034         paragraphSpacing(paragraphSpacing),}
\DoxyCodeLine{00035         linesPerPage(linesPerPage),}
\DoxyCodeLine{00036         f(f),}
\DoxyCodeLine{00037         xDropDead(dropDead != 0 ? dropDead : x1) \{\}}
\DoxyCodeLine{00038 \};}
\DoxyCodeLine{00039 }
\DoxyCodeLine{00040 \textcolor{keyword}{class }\mbox{\hyperlink{classPage}{Page}} \{}
\DoxyCodeLine{00041  \textcolor{keyword}{private}:}
\DoxyCodeLine{00042   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *text;}
\DoxyCodeLine{00043   \textcolor{keyword}{const} \mbox{\hyperlink{classPageLayout}{PageLayout}} *layout;}
\DoxyCodeLine{00044   std::vector<uint32\_t> lines;}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046  \textcolor{keyword}{public}:}
\DoxyCodeLine{00047   \mbox{\hyperlink{classPage}{Page}}(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *text, \textcolor{keyword}{const} \mbox{\hyperlink{classPageLayout}{PageLayout}} *pageLayout,}
\DoxyCodeLine{00048        uint32\_t offset);}
\DoxyCodeLine{00049   \textcolor{keywordtype}{void} addLine(uint32\_t offset) \{ lines.push\_back(offset); \}}
\DoxyCodeLine{00050   uint32\_t getLine(uint32\_t line)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{00051     \textcolor{keywordflow}{if} (line > size()) \{}
\DoxyCodeLine{00052       std::cerr << \textcolor{stringliteral}{"{}src/opengl/primitivesV2/"{}}}
\DoxyCodeLine{00053                    \textcolor{stringliteral}{"{}Document.hh:page::getLine(uint32\_t): line out of bounds"{}}}
\DoxyCodeLine{00054                 << std::endl;}
\DoxyCodeLine{00055     \}}
\DoxyCodeLine{00056     \textcolor{keywordflow}{return} lines[line];}
\DoxyCodeLine{00057   \}}
\DoxyCodeLine{00058   \textcolor{keyword}{const} \mbox{\hyperlink{classPageLayout}{PageLayout}} *getLayout()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} layout; \}}
\DoxyCodeLine{00059   uint32\_t size()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} lines.size(); \}}
\DoxyCodeLine{00060 \};}
\DoxyCodeLine{00061 }
\DoxyCodeLine{\Hypertarget{Document_8hh_source_l00062}\mbox{\hyperlink{classDocument}{00062}} \textcolor{keyword}{class }\mbox{\hyperlink{classDocument}{Document}} \{}
\DoxyCodeLine{00063  \textcolor{keyword}{private}:}
\DoxyCodeLine{00064   \textcolor{comment}{// TODO: the buffer should be rope}}
\DoxyCodeLine{00065   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *text;  \textcolor{comment}{// the main buffer}}
\DoxyCodeLine{00066   std::vector<Page>}
\DoxyCodeLine{00067       pages;  \textcolor{comment}{// TODO: Replace by rope for high performance editable document}}
\DoxyCodeLine{00068 }
\DoxyCodeLine{00069   \mbox{\hyperlink{classPageLayout}{PageLayout}} layout;  \textcolor{comment}{// size of the page to render to}}
\DoxyCodeLine{00070   \textcolor{comment}{/*}}
\DoxyCodeLine{00071 \textcolor{comment}{   precompute text with each line ending at flush margin, stopping in the middle}}
\DoxyCodeLine{00072 \textcolor{comment}{   of a word if necessary}}
\DoxyCodeLine{00073 \textcolor{comment}{  */}}
\DoxyCodeLine{00074   \textcolor{keywordtype}{void} buildJustifiedText(\textcolor{keyword}{const} \mbox{\hyperlink{classPageLayout}{PageLayout}} \&layout, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *text,}
\DoxyCodeLine{00075                           uint32\_t len);}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077   \textcolor{comment}{/*}}
\DoxyCodeLine{00078 \textcolor{comment}{   precompute text with each line ending at a space or -\/ if that lies within}}
\DoxyCodeLine{00079 \textcolor{comment}{   margin range}}
\DoxyCodeLine{00080 \textcolor{comment}{  */}}
\DoxyCodeLine{00081   \textcolor{keywordtype}{void} buildRaggedText(\textcolor{keyword}{const} \mbox{\hyperlink{classPageLayout}{PageLayout}} \&layout, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *text,}
\DoxyCodeLine{00082                        uint32\_t len);}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084  \textcolor{keyword}{public}:}
\DoxyCodeLine{00085   \mbox{\hyperlink{classDocument}{Document}}(\textcolor{keyword}{const} \mbox{\hyperlink{classPageLayout}{PageLayout}} \&layout) : layout(layout), text(\textcolor{keyword}{nullptr}) \{\}}
\DoxyCodeLine{00086   \string~\mbox{\hyperlink{classDocument}{Document}}() \{ \textcolor{keyword}{delete}[] text; \}}
\DoxyCodeLine{00087   \mbox{\hyperlink{classDocument}{Document}}(\textcolor{keyword}{const} \mbox{\hyperlink{classDocument}{Document}} \&orig) = \textcolor{keyword}{delete};}
\DoxyCodeLine{00088   \mbox{\hyperlink{classDocument}{Document}} \&operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classDocument}{Document}} \&orig) = \textcolor{keyword}{delete};}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090   \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *getText()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} text; \}}
\DoxyCodeLine{00091   \textcolor{keyword}{const} \mbox{\hyperlink{classPage}{Page}} *getPage(uint32\_t p)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \&pages[p]; \}}
\DoxyCodeLine{00092   \textcolor{keyword}{const} \mbox{\hyperlink{classPageLayout}{PageLayout}} *getLayout()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \&layout; \}}
\DoxyCodeLine{00093   uint32\_t getPageCount()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} pages.size(); \}}
\DoxyCodeLine{00094 }
\DoxyCodeLine{00095   \textcolor{keywordtype}{void} appendFile(\textcolor{keyword}{const} \mbox{\hyperlink{classPageLayout}{PageLayout}} \&layout, \textcolor{keyword}{const} \textcolor{keywordtype}{char} filename[]);}
\DoxyCodeLine{00096 \};}

\end{DoxyCode}
